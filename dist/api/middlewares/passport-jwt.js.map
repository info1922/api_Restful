{"version":3,"sources":["../../../src/api/middlewares/passport-jwt.js"],"names":["configJWTStrategy","opts","jwtFromRequest","PassportJWT","ExtractJwt","fromAuthHeaderAsBearerToken","secretOrKey","devConfig","secret","Passport","use","Strategy","payload","done","User","findOne","_id","id","err","user"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;AACA;;;;;;AAEO,IAAMA,gDAAoB,SAApBA,iBAAoB,GAAM;;AAEnC,QAAMC,OAAO;AACTC,wBAAgBC,sBAAYC,UAAZ,CAAuBC,2BAAvB,EADP;AAETC,qBAAaC,uBAAUC;AAFd,KAAb;;AAKAC,uBAASC,GAAT,CAAa,IAAIP,sBAAYQ,QAAhB,CAAyBV,IAAzB,EAA+B,UAACW,OAAD,EAAUC,IAAV,EAAmB;AAC3DC,0BAAKC,OAAL,CAAa,EAAEC,KAAKJ,QAAQK,EAAf,EAAb,EAAkC,UAACC,GAAD,EAAMC,IAAN,EAAe;AAC7C,gBAAID,GAAJ,EAAS;AACL,uBAAOL,KAAKK,GAAL,CAAP;AACH;AACD,gBAAIC,IAAJ,EAAU;AACN,uBAAON,KAAK,IAAL,EAAWM,IAAX,CAAP;AACH;AACD,mBAAON,KAAK,IAAL,EAAW,KAAX,CAAP;AACH,SARD;AASH,KAVY,CAAb;AAWH,CAlBM","file":"passport-jwt.js","sourcesContent":["import Passport from 'passport';\r\nimport PassportJWT from 'passport-jwt';\r\nimport { devConfig } from '../resources/config/env/development';\r\nimport User from '../resources/usuario/usuario.model';\r\n\r\nexport const configJWTStrategy = () => {\r\n\r\n    const opts = {\r\n        jwtFromRequest: PassportJWT.ExtractJwt.fromAuthHeaderAsBearerToken(),\r\n        secretOrKey: devConfig.secret,\r\n    };\r\n\r\n    Passport.use(new PassportJWT.Strategy(opts, (payload, done) => {\r\n        User.findOne({ _id: payload.id }, (err, user) => {\r\n            if (err) {\r\n                return done(err);\r\n            }\r\n            if (user) {\r\n                return done(null, user);\r\n            }\r\n            return done(null, false);\r\n        });\r\n    }));\r\n};"]}