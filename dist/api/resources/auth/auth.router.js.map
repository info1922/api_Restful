{"version":3,"sources":["../../../../src/api/resources/auth/auth.router.js"],"names":["authRouter","express","Router","adminPolicy","passport","authenticate","session","isAdmin","get","scope","failureRedirect","authController","sendJWTToken","renuevaToken"],"mappings":";;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AAEO,IAAMA,kCAAaC,kBAAQC,MAAR,EAAnB;;AAEP,IAAMC,cAAc,CAACC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAAD,EAAmDC,gBAAnD,CAApB;;AAEAP,WAAWQ,GAAX,CAAe,SAAf,EAA0BJ,mBAASC,YAAT,CAAsB,QAAtB,EAAgC;AACtD;AACAI,WAAO,CAAC,SAAD,EAAY,OAAZ;AAF+C,CAAhC,CAA1B;;AAKAT,WAAWQ,GAAX,CAAe,kBAAf,EACIJ,mBAASC,YAAT,CAAsB,QAAtB,EAAgC,EAAEK,iBAAiB,UAAnB,EAAhC,CADJ,EAEIC,eAAeC,YAFnB;;AAKAZ,WAAWQ,GAAX,CAAe,WAAf,EAA4BJ,mBAASC,YAAT,CAAsB,UAAtB,EAAkC,EAAEI,OAAO,OAAT,EAAlC,CAA5B;;AAEAT,WAAWQ,GAAX,CAAe,oBAAf,EACIJ,mBAASC,YAAT,CAAsB,UAAtB,EAAkC,EAAEK,iBAAiB,UAAnB,EAAlC,CADJ,EAEIC,eAAeC,YAFnB;;AAKAZ,WAAWQ,GAAX,CAAe,eAAf,EAAgCL,WAAhC,EAA6CQ,eAAeE,YAA5D;;AAEAb,WAAWQ,GAAX,CAAe,eAAf,EAAgCJ,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAAhC,EAAkFK,eAAeN,YAAjG","file":"auth.router.js","sourcesContent":["import express from 'express';\r\nimport passport from 'passport';\r\nimport authController from './auth.controller';\r\nimport { isAdmin } from '../../middlewares/is-admin';\r\n\r\nexport const authRouter = express.Router();\r\n\r\nconst adminPolicy = [passport.authenticate('jwt', { session: false }), isAdmin];\r\n\r\nauthRouter.get('/google', passport.authenticate('google', {\r\n    // scope: ['https://www.googleapis.com/auth/plus.login']\r\n    scope: ['profile', 'email']\r\n}));\r\n\r\nauthRouter.get('/google/callback',\r\n    passport.authenticate('google', { failureRedirect: '/failure' }),\r\n    authController.sendJWTToken\r\n);\r\n\r\nauthRouter.get('/facebook', passport.authenticate('facebook', { scope: 'email' }));\r\n\r\nauthRouter.get('/facebook/callback',\r\n    passport.authenticate('facebook', { failureRedirect: '/failure' }),\r\n    authController.sendJWTToken\r\n);\r\n\r\nauthRouter.get('/renuevatoken', adminPolicy, authController.renuevaToken);\r\n\r\nauthRouter.get('/authenticate', passport.authenticate('jwt', { session: false }), authController.authenticate);"]}