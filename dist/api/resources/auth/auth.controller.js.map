{"version":3,"sources":["../../../../src/api/resources/auth/auth.controller.js"],"names":["moment","require","expires","add","valueOf","sendJWTToken","req","res","console","log","currentUser","id","token","jwt","sign","devConfig","secret","expiresIn","redirect","frontendURL","authenticate","send","renuevaToken","status","json","ok"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA,IAAIA,SAASC,QAAQ,QAAR,CAAb;;AAEA,IAAIC,UAAUF,SAASG,GAAT,CAAa,EAAb,EAAiB,MAAjB,EAAyBC,OAAzB,EAAd;;kBAEe;AAIXC,gBAJW,wBAIEC,GAJF,EAIOC,GAJP,EAIY;AACnBC,gBAAQC,GAAR,CAAYH,IAAII,WAAJ,CAAgBC,EAA5B;AACA,YAAMC,QAAQC,uBAAIC,IAAJ,CAAS,EAAEH,IAAIL,IAAII,WAAJ,CAAgBC,EAAtB,EAAT,EAAqCI,uBAAUC,MAA/C,EAAuD,EAAEC,WAAWf,OAAb,EAAvD,CAAd;;AAEA;AACAK,YAAIW,QAAJ,CAAgBH,uBAAUI,WAA1B,sBAAsDP,KAAtD;AACH,KAVU;AAWXQ,gBAXW,wBAWEd,GAXF,EAWOC,GAXP,EAWY;AACnB,eAAOA,IAAIc,IAAJ,CAAS,IAAT,CAAP;AACH,KAbU;AAeXC,gBAfW,wBAeEhB,GAfF,EAeOC,GAfP,EAeY;AACnB,YAAMK,QAAQC,uBAAIC,IAAJ,CAAS,EAAEH,IAAIL,IAAII,WAAV,EAAT,EAAkCK,uBAAUC,MAA5C,EAAoD,EAAEC,WAAWf,OAAb,EAApD,CAAd;AACAK,YAAIgB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBC,gBAAI,IADa;AAEjBb,mBAAOA;AAFU,SAArB;AAIH;AArBU,C","file":"auth.controller.js","sourcesContent":["import jwt from 'jsonwebtoken';\r\nimport { devConfig } from './../config/env/development';\r\nvar moment = require('moment');\r\n\r\nvar expires = moment().add(30, 'days').valueOf();\r\n\r\nexport default {\r\n\r\n\r\n\r\n    sendJWTToken(req, res) {\r\n        console.log(req.currentUser.id);\r\n        const token = jwt.sign({ id: req.currentUser.id }, devConfig.secret, { expiresIn: expires });\r\n\r\n        // return res.json({ ok: true, token }); // Jwt token\r\n        res.redirect(`${devConfig.frontendURL}/panel/?token=${token}`);\r\n    },\r\n    authenticate(req, res) {\r\n        return res.send(true);\r\n    },\r\n\r\n    renuevaToken(req, res) {\r\n        const token = jwt.sign({ id: req.currentUser }, devConfig.secret, { expiresIn: expires });\r\n        res.status(200).json({\r\n            ok: true,\r\n            token: token\r\n        });\r\n    }\r\n};"]}