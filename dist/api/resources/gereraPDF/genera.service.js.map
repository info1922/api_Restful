{"version":3,"sources":["../../../../src/api/resources/gereraPDF/genera.service.js"],"names":["fonts","Roboto","normal","bold","italics","bolditalics","printer","PdfPrinter","meses","Array","hoy","Date","mes","getMonth","fechaD","getDate","getFullYear","module","exports","create","datos","tipo","docDefinition","pageSize","pageMargins","footer","currentPage","pageCount","text","toString","alignment","style","content","columns","width","image","margin","canvas","type","x1","y1","x2","y2","lineWidth","table","widths","headerRows","body","styles","header","fontSize","subheader","fecha","tableExample","tableHeader","color","page","now","pdfDoc","createPdfKitDocument"],"mappings":"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","file":"genera.service.js","sourcesContent":["import PdfPrinter from 'pdfmake';\r\nimport fs from 'fs';\r\n\r\nconst fonts = {\r\n    Roboto: {\r\n        normal: './assets/fonts/Roboto-Regular.ttf',\r\n        bold: './assets/fonts/Roboto-Medium.ttf',\r\n        italics: './assets/fonts/Roboto-Italic.ttf',\r\n        bolditalics: './assets/fonts/Roboto-Italic.ttf',\r\n    },\r\n};\r\n\r\nvar printer = new PdfPrinter(fonts);\r\n\r\nvar meses = new Array(\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\");\r\nvar hoy = new Date();\r\nvar mes = meses[hoy.getMonth()];\r\nvar fechaD = hoy.getDate() + ' de ' + mes + ' de ' + hoy.getFullYear();\r\n\r\n// var data = [{\r\n//     image: './assets/pdf.png',\r\n//     width: 50,\r\n//     height: 50,\r\n// }, 'Another one here', 'OK?', 'Otra'];\r\n\r\nmodule.exports = {\r\n    create: function(datos, tipo) {\r\n\r\n        var docDefinition = {\r\n            pageSize: 'A4',\r\n            pageMargins: [40, 40, 40, 60],\r\n            footer: function(currentPage, pageCount) {\r\n                return [\r\n                    { text: 'Pag. ' + currentPage.toString() + ' de ' + pageCount, alignment: 'right', style: 'page' }\r\n                ];\r\n            },\r\n            // header: function(currentPage, pageCount, pageSize) {\r\n            //     // you can apply any logic and return any valid pdfmake element\r\n\r\n            //     return [\r\n            //         { text: 'simple text', alignment: (currentPage % 2) ? 'left' : 'right' },\r\n            //         { canvas: [{ type: 'rect', x: 170, y: 32, w: pageSize.width - 170, h: 40 }] }\r\n            //     ];\r\n            // },\r\n\r\n\r\n            // watermark: { text: 'test watermark', color: 'blue', opacity: 0.3, bold: true, italics: false },\r\n            content: [{\r\n                    columns: [{\r\n                            width: 60,\r\n                            image: './assets/1.png',\r\n\r\n                        },\r\n                        {\r\n                            width: 'auto',\r\n                            text: 'H. Ayuntamiento Constitucional De San Miguel Suchixtepec, Miahutl√°n Oaxaca.',\r\n                            style: 'header',\r\n                            alignment: 'center'\r\n                        },\r\n                        {\r\n                            width: 60,\r\n                            image: './assets/escudo2.png',\r\n\r\n                        },\r\n                    ]\r\n                },\r\n                { text: `${fechaD}`, style: 'fecha', alignment: 'center' },\r\n                { text: `Registros de ${tipo}`, style: 'subheader', alignment: 'center', margin: [0, 30, 0, 40] },\r\n                {\r\n                    canvas: [{\r\n                            type: 'line',\r\n                            x1: 40,\r\n                            y1: 0,\r\n                            x2: 470, // Largo\r\n                            y2: 0,\r\n                            lineWidth: 1\r\n                        },\r\n\r\n                    ]\r\n                },\r\n\r\n                {\r\n                    style: 'tableExample',\r\n                    table: {\r\n                        widths: ['auto', '*', '*', 200],\r\n                        headerRows: 1,\r\n                        // body: [\r\n                        //     [{ text: 'Imagen', bold: true, fontSize: 12, },\r\n                        //         { text: 'Nombre', bold: true, fontSize: 12 },\r\n                        //         { text: 'Cantidad', bold: true, fontSize: 12 },\r\n                        //         { text: 'Lugar', bold: true, fontSize: 12 }\r\n                        //     ],\r\n                        //     datos\r\n                        // ]\r\n                        body: datos\r\n                    }\r\n                },\r\n\r\n\r\n            ],\r\n\r\n\r\n            styles: {\r\n                header: {\r\n                    fontSize: 14,\r\n                    bold: true,\r\n                    margin: [40, 20, 40, 20]\r\n                },\r\n                subheader: {\r\n                    fontSize: 11,\r\n                    bold: true,\r\n                    margin: [0, 10, 0, 5]\r\n                },\r\n                fecha: {\r\n                    fontSize: 10,\r\n                    bold: false,\r\n                    margin: [0, 10, 0, 5]\r\n                },\r\n                tableExample: {\r\n                    margin: [0, 30, 0, 15]\r\n                },\r\n                tableHeader: {\r\n                    bold: true,\r\n                    fontSize: 13,\r\n                    color: 'black'\r\n                },\r\n                page: {\r\n                    // heights: 70,\r\n                    fontSize: 9,\r\n                    bold: false,\r\n                    margin: [0, 0, 30, 0]\r\n                }\r\n            },\r\n\r\n        };\r\n\r\n        const fecha = Date.now();\r\n        // const mil = fecha.\r\n        // const fileName = `materiales-${fecha}.pdf`;\r\n        // const writeStream = fs.createWriteStream(fileName);\r\n        const pdfDoc = printer.createPdfKitDocument(docDefinition);\r\n\r\n        return pdfDoc;\r\n\r\n    }\r\n\r\n};"]}